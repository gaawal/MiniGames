System.register("chunks:///_virtual/Balloon.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,a,r,l,s,c,u,p,h,f,m,d,b,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,r=e._decorator,l=e.Color,s=e.LabelComponent,c=e.SpriteComponent,u=e.SpriteFrame,p=e.AudioClip,h=e.AudioSource,f=e.Node,m=e.Animation,d=e.Vec3,b=e.tween,S=e.Component}],execute:function(){var y,g,w,R,v,z,F,C,D,B,x,M,T,E,_,A,O,N,P,k,q,I;a._RF.push({},"b708dzIjrVF+ahEnnn/kUeh","Balloon",void 0);var L=r.ccclass,j=r.property;e("Balloon",(y=L("Balloon"),g=j(l),w=j(s),R=j(c),v=j([u]),z=j(p),F=j(h),C=j(f),y((x=t((B=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,n(t,"minScale",x,o(t)),n(t,"maxScale",M,o(t)),n(t,"minRotationSpeed",T,o(t)),n(t,"maxRotationSpeed",E,o(t)),n(t,"colors",_,o(t)),n(t,"label",A,o(t)),n(t,"balloonSprite",O,o(t)),n(t,"spriteFrames",N,o(t)),n(t,"clip",P,o(t)),n(t,"audioSource",k,o(t)),n(t,"balloonParticle",q,o(t)),n(t,"spawnTime",I,o(t)),t.originalScale=new d,t._rotationDirection=1,t.difficulty=1,t.rotationSpeed=1,t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.node.setScale(0,0),this.setRandomSpriteFrame(),this.setRandomColor(),this.setRandomRotationDirection()},a.start=function(){this.node.on(f.EventType.TOUCH_START,this.onBalloonClicked,this)},a.update=function(e){this.rotateBalloon(e)},a.rotateBalloon=function(e){var t=this.rotationSpeed*e*this._rotationDirection;this.node.angle+=t},a.playOneShot=function(){this.audioSource.playOneShot(this.clip,1)},a.onBalloonClicked=function(e){this.playOneShot(),this.applyElasticDeformation();var t=this.getComponent(m);t?(t.once(m.EventType.FINISHED,this.onAnimationFinished,this),t.play("BalloonExplode")):this.node.destroy()},a.onAnimationFinished=function(){this.node.destroy()},a.setNumber=function(e,t){this.spawnTime=t,this.label&&(this.label.string=e.toString())},a.setUniqueScale=function(e){var t=new d(e,e,e);b(this.node).to(1,{scale:t},{easing:"quartOut"}).start()},a.setRandomShowEffect=function(e){this.balloonParticle.active=!1},a.setRandomSpriteFrame=function(){if(this.spriteFrames.length>0){var e=Math.floor(Math.random()*this.spriteFrames.length),t=this.spriteFrames[e],i=this.node.getComponent(c);i&&(i.spriteFrame=t)}else console.warn("No sprite frames defined in the spriteFrames array.")},a.getScaleSize=function(){return this.node.scale.x},a.setRandomColor=function(){if(this.colors.length>0){var e=Math.floor(Math.random()*this.colors.length),t=this.colors[e];this.balloonSprite&&(this.balloonSprite.color=t)}else console.warn("No colors defined in the colors array.")},a.applyElasticDeformation=function(){var e=this,t=new d(1.5*this.node.scale.x,1.5*this.node.scale.y,1);b(this.node).to(.1,{scale:t},{easing:"quartOut"}).call((function(){e.originalScale.set(e.node.scale)})).to(.1,{scale:this.originalScale},{easing:"quartOut"}).start()},a.getRandomScale=function(){var e=Math.random()*(this.maxScale-this.minScale)+this.minScale;return new d(e,e,1)},a.setRandomRotationDirection=function(){this._rotationDirection=Math.random()<.5?1:-1},a.adjustRotationSpeedByDifficultyConfig=function(e,t){var i=Math.random()*(t-e)+e;this.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,this.rotationSpeed*=i},t}(S)).prototype,"minScale",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),M=t(B.prototype,"maxScale",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),T=t(B.prototype,"minRotationSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),E=t(B.prototype,"maxRotationSpeed",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),_=t(B.prototype,"colors",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=t(B.prototype,"label",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(B.prototype,"balloonSprite",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(B.prototype,"spriteFrames",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=t(B.prototype,"clip",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(B.prototype,"audioSource",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(B.prototype,"balloonParticle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(B.prototype,"spawnTime",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),D=B))||D));a._RF.pop()}}}));

System.register("chunks:///_virtual/debug-view-runtime-control.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,i,n,s,l,r,a,g,h,p,c,C,d,m,u,L;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,l=t._decorator,r=t.Node,a=t.Canvas,g=t.UITransform,h=t.instantiate,p=t.Label,c=t.Color,C=t.RichText,d=t.Toggle,m=t.Button,u=t.director,L=t.Component}],execute:function(){var f,M,b,v,T,S,x,E,I;s._RF.push({},"b2bd1+njXxJxaFY3ymm06WU","debug-view-runtime-control",void 0);var A=l.ccclass,y=l.property;t("DebugViewRuntimeControl",(f=A("internal.DebugViewRuntimeControl"),M=y(r),b=y(r),v=y(r),f((x=e((S=function(t){function e(){for(var e,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=t.call.apply(t,[this].concat(s))||this,i(e,"compositeModeToggle",x,n(e)),i(e,"singleModeToggle",E,n(e)),i(e,"EnableAllCompositeModeButton",I,n(e)),e._single=0,e.strSingle=["No Single Debug","Vertex Color","Vertex Normal","Vertex Tangent","World Position","Vertex Mirror","Face Side","UV0","UV1","UV Lightmap","Project Depth","Linear Depth","Fragment Normal","Fragment Tangent","Fragment Binormal","Base Color","Diffuse Color","Specular Color","Transparency","Metallic","Roughness","Specular Intensity","IOR","Direct Diffuse","Direct Specular","Direct All","Env Diffuse","Env Specular","Env All","Emissive","Light Map","Shadow","AO","Fresnel","Direct Transmit Diffuse","Direct Transmit Specular","Env Transmit Diffuse","Env Transmit Specular","Transmit All","Direct Internal Specular","Env Internal Specular","Internal All","Fog"],e.strComposite=["Direct Diffuse","Direct Specular","Env Diffuse","Env Specular","Emissive","Light Map","Shadow","AO","Normal Map","Fog","Tone Mapping","Gamma Correction","Fresnel","Transmit Diffuse","Transmit Specular","Internal Specular","TT"],e.strMisc=["CSM Layer Coloration","Lighting With Albedo"],e.compositeModeToggleList=[],e.singleModeToggleList=[],e.miscModeToggleList=[],e.textComponentList=[],e.labelComponentList=[],e.textContentList=[],e.hideButtonLabel=void 0,e._currentColorIndex=0,e.strColor=["<color=#ffffff>","<color=#000000>","<color=#ff0000>","<color=#00ff00>","<color=#0000ff>"],e.color=[c.WHITE,c.BLACK,c.RED,c.GREEN,c.BLUE],e}o(e,t);var s=e.prototype;return s.start=function(){if(this.node.parent.getComponent(a)){var t=this.node.parent.getComponent(g),e=.5*t.width,o=.5*t.height,i=.1*e-e,n=o-.1*o,s=this.node.getChildByName("MiscMode"),l=h(s);l.parent=this.node,l.name="Buttons";var r=h(s);r.parent=this.node,r.name="Titles";for(var u=0;u<2;u++){var L=h(this.EnableAllCompositeModeButton.getChildByName("Label"));L.setPosition(i+(u>0?450:150),n,0),L.setScale(.75,.75,.75),L.parent=r;var f=L.getComponent(p);f.string=u?"----------Composite Mode----------":"----------Single Mode----------",f.color=c.WHITE,f.overflow=0,this.labelComponentList[this.labelComponentList.length]=f}n-=20;for(var M=0,b=0;b<this.strSingle.length;b++,M++){b===this.strSingle.length>>1&&(i+=200,M=0);var v=b?h(this.singleModeToggle):this.singleModeToggle;v.setPosition(i,n-20*M,0),v.setScale(.5,.5,.5),v.parent=this.singleModeToggle.parent;var T=v.getComponentInChildren(C);T.string=this.strSingle[b],this.textComponentList[this.textComponentList.length]=T,this.textContentList[this.textContentList.length]=T.string,v.on(d.EventType.TOGGLE,this.toggleSingleMode,this),this.singleModeToggleList[b]=v}i+=200,this.EnableAllCompositeModeButton.setPosition(i+15,n,0),this.EnableAllCompositeModeButton.setScale(.5,.5,.5),this.EnableAllCompositeModeButton.on(m.EventType.CLICK,this.enableAllCompositeMode,this),this.EnableAllCompositeModeButton.parent=l;var S=this.EnableAllCompositeModeButton.getComponentInChildren(p);this.labelComponentList[this.labelComponentList.length]=S;var x=h(this.EnableAllCompositeModeButton);x.setPosition(i+90,n,0),x.setScale(.5,.5,.5),x.on(m.EventType.CLICK,this.changeTextColor,this),x.parent=l,(S=x.getComponentInChildren(p)).string="TextColor",this.labelComponentList[this.labelComponentList.length]=S;var E=h(this.EnableAllCompositeModeButton);E.setPosition(i+200,n,0),E.setScale(.5,.5,.5),E.on(m.EventType.CLICK,this.hideUI,this),E.parent=this.node.parent,(S=E.getComponentInChildren(p)).string="Hide UI",this.labelComponentList[this.labelComponentList.length]=S,this.hideButtonLabel=S,n-=40;for(var I=0;I<this.strMisc.length;I++){var A=h(this.compositeModeToggle);A.setPosition(i,n-20*I,0),A.setScale(.5,.5,.5),A.parent=s;var y=A.getComponentInChildren(C);y.string=this.strMisc[I],this.textComponentList[this.textComponentList.length]=y,this.textContentList[this.textContentList.length]=y.string,A.getComponent(d).isChecked=!!I,A.on(d.EventType.TOGGLE,I?this.toggleLightingWithAlbedo:this.toggleCSMColoration,this),this.miscModeToggleList[I]=A}n-=150;for(var D=0;D<this.strComposite.length;D++){var B=D?h(this.compositeModeToggle):this.compositeModeToggle;B.setPosition(i,n-20*D,0),B.setScale(.5,.5,.5),B.parent=this.compositeModeToggle.parent;var w=B.getComponentInChildren(C);w.string=this.strComposite[D],this.textComponentList[this.textComponentList.length]=w,this.textContentList[this.textContentList.length]=w.string,B.on(d.EventType.TOGGLE,this.toggleCompositeMode,this),this.compositeModeToggleList[D]=B}}else console.error("debug-view-runtime-control should be child of Canvas")},s.isTextMatched=function(t,e){var o=new String(t),i=o.search(">");return-1===i?t===e:(o=(o=o.substr(i+1)).substr(0,o.search("<")))===e},s.toggleSingleMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strSingle.length;i++)this.isTextMatched(o.string,this.strSingle[i])&&(e.singleMode=i)},s.toggleCompositeMode=function(t){for(var e=u.root.debugView,o=t.getComponentInChildren(C),i=0;i<this.strComposite.length;i++)this.isTextMatched(o.string,this.strComposite[i])&&e.enableCompositeMode(i,t.isChecked)},s.toggleLightingWithAlbedo=function(t){u.root.debugView.lightingWithAlbedo=t.isChecked},s.toggleCSMColoration=function(t){u.root.debugView.csmLayerColoration=t.isChecked},s.enableAllCompositeMode=function(t){var e=u.root.debugView;e.enableAllCompositeMode(!0);for(var o=0;o<this.compositeModeToggleList.length;o++){this.compositeModeToggleList[o].getComponent(d).isChecked=!0}var i=this.miscModeToggleList[0].getComponent(d);i.isChecked=!1,e.csmLayerColoration=!1,(i=this.miscModeToggleList[1].getComponent(d)).isChecked=!0,e.lightingWithAlbedo=!0},s.hideUI=function(t){var e=this.node.getChildByName("Titles"),o=!e.active;this.singleModeToggleList[0].parent.active=o,this.miscModeToggleList[0].parent.active=o,this.compositeModeToggleList[0].parent.active=o,this.EnableAllCompositeModeButton.parent.active=o,e.active=o,this.hideButtonLabel.string=o?"Hide UI":"Show UI"},s.changeTextColor=function(t){this._currentColorIndex++,this._currentColorIndex>=this.strColor.length&&(this._currentColorIndex=0);for(var e=0;e<this.textComponentList.length;e++)this.textComponentList[e].string=this.strColor[this._currentColorIndex]+this.textContentList[e]+"</color>";for(var o=0;o<this.labelComponentList.length;o++)this.labelComponentList[o].color=this.color[this._currentColorIndex]},s.onLoad=function(){},s.update=function(t){},e}(L)).prototype,"compositeModeToggle",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=e(S.prototype,"singleModeToggle",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=e(S.prototype,"EnableAllCompositeModeButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=S))||T));s._RF.pop()}}}));

System.register("chunks:///_virtual/DifficultyConfig.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"fed43PEmG9OSpk0IBnCUg3Q","DifficultyConfig",void 0);e("difficultyConfig",{kindergarten:{name:"幼儿",numberRange:[1,10],maxBalloons:3,rotationSpeedMultiplierRange:[1,1.2],scoreIncrement:6,requiredScore:50,gameTime:15,gameModes:{gameMode:["NUM"],sortOrder:["ASC"]}},primary:{name:"小学",numberRange:[1,20],maxBalloons:3,rotationSpeedMultiplierRange:[1,1.5],scoreIncrement:7,requiredScore:70,gameTime:15,gameModes:{gameMode:["NUM"],sortOrder:["ASC","DESC"]}},juniorHigh:{name:"初中",numberRange:[1,10],maxBalloons:4,rotationSpeedMultiplierRange:[1,2],scoreIncrement:8,requiredScore:80,gameTime:30,gameModes:{gameMode:["SIZE","NUM"],sortOrder:["ASC"]}},highSchool:{name:"高中",numberRange:[-10,10],maxBalloons:5,rotationSpeedMultiplierRange:[1,2.5],scoreIncrement:8,requiredScore:100,gameTime:30,gameModes:{gameMode:["SIZE","NUM"],sortOrder:["ASC","DESC"]}},college:{name:"大学",numberRange:[-20,20],maxBalloons:4,rotationSpeedMultiplierRange:[1,2.5],scoreIncrement:9,requiredScore:120,gameTime:35,gameModes:{gameMode:["SIZE","NUM"],sortOrder:["ASC","DESC"]}},graduate:{name:"研究生",numberRange:[-30,50],maxBalloons:5,rotationSpeedMultiplierRange:[2,3],scoreIncrement:9,requiredScore:150,gameTime:50,gameModes:{gameMode:["NUM","SIZE"],sortOrder:["ASC","DESC"]}},phd:{name:"博士",numberRange:[-99,99],maxBalloons:5,rotationSpeedMultiplierRange:[2,3],scoreIncrement:10,requiredScore:200,gameTime:50,gameModes:{gameMode:["NUM","SIZE"],sortOrder:["ASC","DESC"]}}});r._RF.pop()}}}));

System.register("chunks:///_virtual/GameController.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Balloon.ts","./DifficultyConfig.ts"],(function(e){var t,i,n,r,o,a,l,u,s,c,h,f,m,d,g,b,S,p,v;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Prefab,u=e.Node,s=e.AudioSource,c=e.AudioClip,h=e.Label,f=e.Button,m=e.Animation,d=e.UITransform,g=e.Vec3,b=e.instantiate,S=e.Component},function(e){p=e.Balloon},function(e){v=e.difficultyConfig}],execute:function(){var y,L,w,I,O,x,U,D,T,G,C,M,z,B,A,N,R,k,K,P,E,j,_,q,H,V,F,Z,J,X,Q,W,Y,$,ee,te,ie,ne,re,oe,ae,le,ue,se,ce,he,fe,me,de,ge,be,Se,pe,ve,ye,Le,we,Ie,Oe,xe,Ue,De,Te,Ge,Ce,Me,ze,Be,Ae,Ne,Re,ke,Ke,Pe,Ee;o._RF.push({},"71da6Oca8BLTp960GzrAX9/","GameController",void 0);var je=a.ccclass,_e=a.property;e("GameController",(y=je("GameController"),L=_e(l),w=_e(u),I=_e(s),O=_e(c),x=_e(c),U=_e(c),D=_e(c),T=_e(c),G=_e(c),C=_e(c),M=_e(c),z=_e(u),B=_e(u),A=_e(u),N=_e(u),R=_e(c),k=_e(c),K=_e(c),P=_e(h),E=_e(h),j=_e(h),_=_e(h),q=_e(h),H=_e(u),V=_e(u),F=_e(u),Z=_e(f),J=_e(f),X=_e(f),Q=_e(h),W=_e(h),Y=_e(h),$=_e(h),ee=_e(h),y((ne=t((ie=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,n(t,"balloonPrefab",ne,r(t)),n(t,"playArea",re,r(t)),n(t,"audioSource",oe,r(t)),n(t,"correctSound",ae,r(t)),n(t,"wrongSound",le,r(t)),n(t,"appearSound",ue,r(t)),n(t,"scoreSoundUp",se,r(t)),n(t,"scoreSoundDown",ce,r(t)),n(t,"timeOverSound",he,r(t)),n(t,"timeOverDingSound",fe,r(t)),n(t,"bilingDingSound",me,r(t)),n(t,"gameOverUI",de,r(t)),n(t,"targetScoreUI",ge,r(t)),n(t,"playingGameUI",be,r(t)),n(t,"menuUI",Se,r(t)),n(t,"levelUpSound",pe,r(t)),n(t,"levelUpVocalSound",ve,r(t)),n(t,"levelDownSound",ye,r(t)),n(t,"levelChangeLabel",Le,r(t)),n(t,"nextLevelInfoLabel",we,r(t)),n(t,"ganmeOverTitleLabel",Ie,r(t)),n(t,"nextLevelInfoNumLabel",Oe,r(t)),n(t,"targetScoreLabel",xe,r(t)),n(t,"levelChangeUI",Ue,r(t)),n(t,"correctImage",De,r(t)),n(t,"wrongImage",Te,r(t)),n(t,"startGameButton",Ge,r(t)),n(t,"restartGameButton",Ce,r(t)),n(t,"risenGameButton",Me,r(t)),n(t,"countDownLabel",ze,r(t)),n(t,"scoreLabel",Be,r(t)),n(t,"currentLevelLabel",Ae,r(t)),t.currentLevelString=null,t.originLevelString=null,n(t,"gameOverScoreLabel",Ne,r(t)),n(t,"gameModeLabel",Re,r(t)),t.gameMode="NUM",t.sortOrder="ASC",t.maxBalloons=5,n(t,"minScale",ke,r(t)),n(t,"maxScale",Ke,r(t)),t.maxRadius=.1,n(t,"totalTime",Pe,r(t)),n(t,"defaultDifficultyKey",Ee,r(t)),t.currentTime=0,t.sortedNumbers=[],t.generatedScales=[],t.nextIndex=0,t.levelChangeUIAnimation=null,t.flexibilityScore=0,t.originScore=0,t.numbersToSpawn=[],t.nextCorrectNumber=null,t.isGameOver=!1,t.currentDifficultyLevel=void 0,t}i(t,e);var o=t.prototype;return o.start=function(){this.levelChangeUIAnimation=this.levelChangeUI.getComponent(m),this.menuUI.active=!0,this.gameOverUI.active=!1,this.playingGameUI.active=!1,this.startGameButton.node.on(u.EventType.TOUCH_START,this.startGame,this),this.restartGameButton.node.on(u.EventType.TOUCH_START,this.restartGame,this),this.risenGameButton.node.on(u.EventType.TOUCH_START,this.startGame,this)},o.setDifficulty=function(e){this.currentDifficultyLevel=v[e],console.log(this.currentDifficultyLevel,JSON.stringify(this.currentDifficultyLevel)),this.maxBalloons=this.currentDifficultyLevel.maxBalloons,console.log("当前游戏level",JSON.stringify(this.currentDifficultyLevel))},o.restartGame=function(){var e=Object.keys(v);this.defaultDifficultyKey=e[0],console.log("restartGame defaultDifficultyKey=",this.defaultDifficultyKey),this.startGame()},o.startGame=function(){this.setDifficulty(this.defaultDifficultyKey),this.menuUI.active=!1,this.playingGameUI.active=!0,this.gameOverUI.active=!1,this.showTargetScoreUI()},o.showTargetScoreUI=function(){var e=this;this.targetScoreUI.active=!0,this.targetScoreLabel.string=this.currentDifficultyLevel.requiredScore.toString(),this.scheduleOnce((function(){e.beginGame()}),3)},o.beginGame=function(){this.targetScoreUI.active=!1,this.audioSource.play(),this.currentTime=this.totalTime,this.currentTime=this.currentDifficultyLevel.gameTime,this.countDownLabel.string=this.currentTime.toString(),this.selectRandomGameMode(),this.flexibilityScore=0,this.scoreLabel.string=this.flexibilityScore.toString(),this.currentLevelString=v[this.defaultDifficultyKey].name,this.levelChangeLabel.string=this.currentLevelString,this.schedule(this.updateTimer,1),this.spawnBalloons()},o.selectRandomGameMode=function(){var e=this.currentDifficultyLevel.gameModes.gameMode,t=this.currentDifficultyLevel.gameModes.sortOrder;this.gameMode=e[Math.floor(Math.random()*e.length)],this.sortOrder=t[Math.floor(Math.random()*t.length)],this.updateGameModeLabel()},o.moveToNextLevel=function(){var e=Object.keys(v),t=e.indexOf(this.defaultDifficultyKey)+1;t<e.length?(this.defaultDifficultyKey=e[t],console.log("更新到下一个难度级别",this.defaultDifficultyKey),this.setDifficulty(this.defaultDifficultyKey),this.audioSource.playOneShot(this.levelUpSound,1),this.resetGameState(),this.startGame()):(console.log("恭喜你完成了所有难度级别！"),this.showGameCompletionUI())},o.showGameCompletionUI=function(){},o.resetGameState=function(){this.flexibilityScore=0,this.scoreLabel.string="0"},o.updateGameModeLabel=function(){var e="";"NUM"===this.gameMode?e+="数字":"SIZE"===this.gameMode&&(e+="气球"),e+="ASC"===this.sortOrder?"从小到大点击":"从大到小点击",this.gameModeLabel.string=e},o.updateGameMode=function(){var e=["数字从小到大点击","数字从大到小点击","气球从小到大点击","气球从大到小点击"],t=e[Math.floor(Math.random()*e.length)];this.gameModeLabel.string=t;var i="NUM",n="ASC";t.includes("气球")&&(i="SIZE"),t.includes("大到小")&&(n="DESC"),this.gameMode=i,this.sortOrder=n,console.log("游戏模式"+t)},o.updateTimer=function(){this.currentTime-=1,this.currentTime<=10&&this.currentTime>0&&this.audioSource&&this.timeOverSound&&this.audioSource.playOneShot(this.timeOverSound,1),this.countDownLabel&&(this.countDownLabel.string=this.currentTime.toString()),this.currentTime<=0&&(this.unschedule(this.updateTimer),this.audioSource&&this.timeOverDingSound&&this.audioSource.playOneShot(this.timeOverDingSound,1),this.gameOver())},o.gameOver=function(){var e=this;console.log("game over"),this.destroyAllBalloons(),this.isGameOver=!0,this.playingGameUI.active=!1,this.gameOverUI.active=!0,this.gameOverScoreLabel.string=this.originScore.toString(),this.currentLevelLabel.string=this.currentLevelString,this.audioSource.stop(),this.scheduleOnce((function(){e.updateGameOverUIScore()}),.5),this.audioSource&&this.timeOverDingSound&&this.audioSource.playOneShot(this.timeOverDingSound,1);var t=this.currentDifficultyLevel.requiredScore-this.flexibilityScore;t>0?(this.scoreSoundDown&&this.audioSource.playOneShot(this.scoreSoundUp,.3),this.restartGameButton.node.active=!0,this.risenGameButton.node.active=!0,this.nextLevelInfoLabel.node.active=!0,this.nextLevelInfoNumLabel.node.active=!0,this.ganmeOverTitleLabel.string="闯关失败",this.nextLevelInfoLabel.string="距离下一级还需",this.nextLevelInfoNumLabel.string=t.toString()):(this.restartGameButton.node.active=!1,this.risenGameButton.node.active=!1,this.nextLevelInfoLabel.node.active=!1,this.nextLevelInfoNumLabel.node.active=!1,this.scheduleOnce((function(){e.moveToNextLevel()}),3),this.ganmeOverTitleLabel.string="闯关成功",this.scheduleOnce((function(){e.audioSource.playOneShot(e.levelUpVocalSound,1)}),4))},o.restartSpawnBalloons=function(){this.destroyAllBalloons(),this.nextIndex=0,this.selectRandomGameMode(),this.spawnBalloons()},o.generateUniqueScale=function(){var e,t=this.maxScale-this.minScale;do{e=Math.random()*t+this.minScale}while(this.generatedScales.some((function(t){return Math.abs(t-e)<.1})));return e},o.getRandomPosition=function(){var e=this.playArea.getComponent(d);if(!e)return console.error("playArea lacks a UITransformComponent!"),new g(0,0,0);var t=e.width,i=e.height,n=Math.random()*(t-2*this.maxRadius)+this.maxRadius-t/2,r=Math.random()*(i-2*this.maxRadius)+this.maxRadius-i/2;return new g(n,r,0)},o.generateSortedRandomNumbers=function(e){for(var t=new Set,i=this.currentDifficultyLevel.numberRange,n=i[0],r=i[1];t.size<e;){var o=Math.floor(Math.random()*(r-n+1))+n;t.add(o)}return Array.from(t).sort((function(e,t){return e-t}))},o.spawnBalloons=function(){var e=this;this.destroyAllBalloons(),this.sortedNumbers=this.generateSortedRandomNumbers(this.maxBalloons),this.generatedScales=[];var t=this.currentDifficultyLevel.rotationSpeedMultiplierRange,i=t[0],n=t[1],r=Date.now();this.sortedNumbers.forEach((function(t){var o=b(e.balloonPrefab);e.playArea.addChild(o);var a=e.generateUniqueScale();e.generatedScales.push(a),o.setPosition(e.getRandomPosition());var l=o.getComponent(p);l&&(l.setUniqueScale(a),l.setNumber(t,r),l.adjustRotationSpeedByDifficultyConfig(i,n)),o.on(u.EventType.TOUCH_START,(function(){return e.checkBalloon(t,a,l.spawnTime)}),e)})),this.audioSource&&this.appearSound&&this.audioSource.playOneShot(this.appearSound,1),this.generatedScales=Array.from(this.generatedScales).sort((function(e,t){return e-t})),console.log("气球数字大小数组：",this.sortedNumbers),console.log("气球大小数组：",this.generatedScales)},o.checkBalloon=function(e,t,i){var n=this,r=(Date.now()-i)/1e3,o=!1;if("NUM"===this.gameMode)o="ASC"===this.sortOrder?this.sortedNumbers[this.nextIndex]===e:this.sortedNumbers[this.sortedNumbers.length-1-this.nextIndex]===e;else if("SIZE"===this.gameMode){var a="ASC"===this.sortOrder?this.generatedScales[this.nextIndex]:this.generatedScales[this.generatedScales.length-1-this.nextIndex];console.log("期望的大小，点击的大小：",a,t),o=t===a}o?(console.log("点击正确!",e),this.updateScore(!0,r),this.nextIndex++,this.nextIndex>=this.sortedNumbers.length&&(console.log("全部正确，下一关"),this.audioSource&&this.correctSound&&(this.audioSource.playOneShot(this.correctSound,1),this.showCheckImage(!0),this.scheduleOnce((function(){n.restartSpawnBalloons()}),.3)))):(console.log("点击错误",e),this.updateScore(!1,r),this.audioSource&&this.wrongSound&&this.audioSource.playOneShot(this.wrongSound,1),this.showCheckImage(!1),this.scheduleOnce((function(){n.restartSpawnBalloons()}),.3))},o.updateGameOverUIScore=function(){var e=this,t=0,i=1;this.flexibilityScore>=30&&this.flexibilityScore<100?i=3:this.flexibilityScore>=100&&this.flexibilityScore<300?i=5:this.flexibilityScore>=300&&this.flexibilityScore<600?i=7:this.flexibilityScore>=600&&(i=11);var n=Math.ceil(this.flexibilityScore/i),r=0,o=this.gameOverScoreLabel.getComponent(m);o&&o.play("ScoreNumberPop");var a=setInterval((function(){r<n?(r++,t+=i,e.scoreSoundUp&&e.scoreSoundUp&&e.audioSource.playOneShot(e.scoreSoundUp,.3),e.gameOverScoreLabel.string=t.toString()):(clearInterval(a),e.flexibilityScore!==t&&(t=e.flexibilityScore,e.gameOverScoreLabel.string=t.toString()))}),2e3/n)},o.updateScore=function(e,t){var i=this;void 0===t&&(t=0);this.currentDifficultyLevel.name;var n=this.currentDifficultyLevel.scoreIncrement,r=this.calculateTimeAdjustedScoreIncrement(t,n),o=e?r:2*-r;!e&&this.flexibilityScore+o<0&&(o=-this.flexibilityScore);var a=Math.abs(o),l=0,u=this.scoreLabel.getComponent(m);u&&u.play("ScoreNumberPop");var s=setInterval((function(){l<a?(i.flexibilityScore+=e?1:-1,i.scoreLabel.string=i.flexibilityScore.toString(),l++):clearInterval(s)}),50);if(this.audioSource){var c=e?this.scoreSoundUp:this.scoreSoundDown;c&&this.audioSource.playOneShot(c,.3)}},o.calculateTimeAdjustedScoreIncrement=function(e,t){for(var i=[3,4,5,6],n=[0,1,2,3],r=t,o=0;o<i.length&&e>i[o];o++)r=Math.max(t-n[o],1);if(e>6){var a=e-6,l=Math.min(Math.floor(a/2),t-1);r=Math.max(t-l,1)}return r},o.handleLevelChangeFeedback=function(e,t){var i=this,n=Object.keys(v).findIndex((function(t){return v[t].name===e})),r=Object.keys(v).findIndex((function(e){return v[e].name===t}));r>n?(this.audioSource.playOneShot(this.levelUpSound,1),this.scheduleOnce((function(){i.audioSource.playOneShot(i.levelUpVocalSound,1)}),.5)):r<n&&this.audioSource.playOneShot(this.levelDownSound,1),this.levelChangeUIAnimation.play("levelChange"),this.levelChangeLabel.string=""+t,this.currentLevelString=t},o.showCheckImage=function(e){var t=this;e?(this.correctImage.active=!0,this.scheduleOnce((function(){t.correctImage.active=!1}),.3)):(this.wrongImage.active=!0,this.scheduleOnce((function(){t.wrongImage.active=!1}),.3))},o.destroyAllBalloons=function(){this.playArea.children.slice().forEach((function(e){e.getComponent(p)&&e.destroy()}))},t}(S)).prototype,"balloonPrefab",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=t(ie.prototype,"playArea",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=t(ie.prototype,"audioSource",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=t(ie.prototype,"correctSound",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),le=t(ie.prototype,"wrongSound",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ue=t(ie.prototype,"appearSound",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=t(ie.prototype,"scoreSoundUp",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ce=t(ie.prototype,"scoreSoundDown",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=t(ie.prototype,"timeOverSound",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),fe=t(ie.prototype,"timeOverDingSound",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),me=t(ie.prototype,"bilingDingSound",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),de=t(ie.prototype,"gameOverUI",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ge=t(ie.prototype,"targetScoreUI",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),be=t(ie.prototype,"playingGameUI",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Se=t(ie.prototype,"menuUI",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),pe=t(ie.prototype,"levelUpSound",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ve=t(ie.prototype,"levelUpVocalSound",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ye=t(ie.prototype,"levelDownSound",[K],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Le=t(ie.prototype,"levelChangeLabel",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=t(ie.prototype,"nextLevelInfoLabel",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=t(ie.prototype,"ganmeOverTitleLabel",[j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oe=t(ie.prototype,"nextLevelInfoNumLabel",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=t(ie.prototype,"targetScoreLabel",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ue=t(ie.prototype,"levelChangeUI",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),De=t(ie.prototype,"correctImage",[V],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Te=t(ie.prototype,"wrongImage",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ge=t(ie.prototype,"startGameButton",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ce=t(ie.prototype,"restartGameButton",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Me=t(ie.prototype,"risenGameButton",[X],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ze=t(ie.prototype,"countDownLabel",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=t(ie.prototype,"scoreLabel",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ae=t(ie.prototype,"currentLevelLabel",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ne=t(ie.prototype,"gameOverScoreLabel",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Re=t(ie.prototype,"gameModeLabel",[ee],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ke=t(ie.prototype,"minScale",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ke=t(ie.prototype,"maxScale",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),Pe=t(ie.prototype,"totalTime",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 30}}),Ee=t(ie.prototype,"defaultDifficultyKey",[_e],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"kindergarten"}}),te=ie))||te));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./debug-view-runtime-control.ts","./Balloon.ts","./DifficultyConfig.ts","./GameController.ts"],(function(){return{setters:[null,null,null,null],execute:function(){}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});